CREATE TABLE Colorado_House (
    House_ID INT PRIMARY KEY,
    Price DECIMAL(10, 2),
    Interest_Rate DECIMAL(4, 2),
    Monthly_Payment DECIMAL(10, 2),
    Bedrooms INT,
    Bathrooms INT,
    Sq_Ft INT,
    Acres DECIMAL(4, 2)
);

CREATE TABLE Kansas_House (
    House_ID INT PRIMARY KEY,
    Price DECIMAL(10, 2),
    Interest_Rate DECIMAL(4, 2),
    Bedrooms INT,
    Bathrooms INT,
    Sq_Ft INT,
    Acres DECIMAL(4, 2)
);

INSERT INTO Colorado_House (House_ID, Price, Interest_Rate, Monthly_Payment, Bedrooms, Bathrooms, Sq_Ft, Acres)
VALUES (1, 195000, 3.5, 1480, 3, 2, 1200, 0.5);

INSERT INTO Kansas_House (House_ID, Price, Interest_Rate, Bedrooms, Bathrooms, Sq_Ft, Acres)
VALUES (1, 170000, 7.6, 3, 2, 2100, 1.09);




-- Declare and set constants
SET @LoanTermYears = 30;
SET @Months = @LoanTermYears * 12;
SET @DownPayment = 20000;
SET @ProfitFromColorado = 60000;

-- Variables for Kansas House calculations
SET @KansasPrice = (SELECT Price FROM Kansas_House WHERE House_ID = 1);
SET @KansasInterestRate = (SELECT Interest_Rate FROM Kansas_House WHERE House_ID = 1);
SET @KansasMonthlyRate = @KansasInterestRate / 100 / 12;
SET @KansasLoanAmount = @KansasPrice - @DownPayment;

-- Calculate Kansas monthly payment
SET @KansasMonthlyPayment = @KansasLoanAmount * @KansasMonthlyRate * 
    POW(1 + @KansasMonthlyRate, @Months) / 
    (POW(1 + @KansasMonthlyRate, @Months) - 1);

-- Retrieve Colorado monthly payment
SET @ColoradoMonthlyPayment = (SELECT Monthly_Payment FROM Colorado_House WHERE House_ID = 1);

-- Calculate monthly savings
SET @MonthlySavings = @ColoradoMonthlyPayment - @KansasMonthlyPayment;

-- Output the results
SELECT 
    @KansasMonthlyPayment AS Kansas_Monthly_Payment,
    @ColoradoMonthlyPayment AS Colorado_Monthly_Payment,
    @MonthlySavings AS Monthly_Savings,
    CASE 
        WHEN @MonthlySavings > 0 THEN 'Move to Kansas'
        ELSE 'Stay in Colorado'
    END AS Recommendation;




CREATE TABLE house_details (
    id INT AUTO_INCREMENT PRIMARY KEY,
    state VARCHAR(50),
    house_price DECIMAL(10, 2),
    interest_rate DECIMAL(5, 2),
    monthly_payment DECIMAL(10, 2),
    bedrooms INT,
    bathrooms INT,
    square_feet INT,
    acres DECIMAL(5, 2)
);

-- Insert the details for Colorado house
INSERT INTO house_details (state, house_price, interest_rate, monthly_payment, bedrooms, bathrooms, square_feet, acres)
VALUES ('Colorado', 195000, 3.5, 1480, 3, 2, 1200, 0.5);

-- Insert the details for Kansas house
INSERT INTO house_details (state, house_price, interest_rate, monthly_payment, bedrooms, bathrooms, square_feet, acres)
VALUES ('Kansas', 170000, 7.6, 0, 3, 2, 2100, 1.09);



SET @price_kansas = 170000;
SET @interest_kansas = 7.6 / 100 / 12;
SET @months = 30 * 12;

SET @monthly_payment_kansas = @price_kansas * @interest_kansas * POW((1 + @interest_kansas), @months) / (POW((1 + @interest_kansas), @months) - 1);

UPDATE house_details SET monthly_payment = @monthly_payment_kansas WHERE state = 'Kansas';

-- Check the updated table
SELECT * FROM house_details;




-- Assuming a $60,000 profit from selling the Colorado house and using $20,000 as a down payment in Kansas.
SET @profit_colorado = 60000;
SET @down_payment_kansas = 20000;
SET @new_loan_kansas = 170000 - @down_payment_kansas;

SET @new_monthly_payment_kansas = @new_loan_kansas * @interest_kansas * POW((1 + @interest_kansas), @months) / (POW((1 + @interest_kansas), @months) - 1);

-- Calculate the savings
SELECT 
    state,
    house_price,
    interest_rate,
    monthly_payment,
    CASE 
        WHEN state = 'Kansas' THEN @new_monthly_payment_kansas
        ELSE monthly_payment
    END AS adjusted_monthly_payment,
    (1480 - @new_monthly_payment_kansas) AS monthly_savings
FROM 
    house_details;

